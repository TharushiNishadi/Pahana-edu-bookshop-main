<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: #1a1a1a; 
            color: white; 
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        .test-section { 
            background: #333; 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 10px; 
            border: 2px solid #555; 
        }
        .success { color: #4CAF50; font-weight: bold; }
        .error { color: #f44336; font-weight: bold; }
        .info { color: #2196F3; }
        button { 
            padding: 10px 20px; 
            margin: 5px; 
            background: #667eea; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        button:hover { background: #5a6fd8; }
        .data-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 20px; 
        }
        .data-table th { 
            background: #555; 
            color: white; 
            padding: 15px; 
            text-align: left; 
            border-bottom: 2px solid #777; 
        }
        .data-table td { 
            padding: 15px; 
            border-bottom: 1px solid #444; 
            color: white; 
        }
        .data-table tr:hover { 
            background: rgba(255, 255, 255, 0.1); 
        }
        .thumbnail { 
            width: 50px; 
            height: 50px; 
            border-radius: 5px; 
            border: 2px solid #555; 
            object-fit: cover; 
        }
        .badge { 
            padding: 5px 10px; 
            border-radius: 15px; 
            font-size: 12px; 
            font-weight: bold; 
        }
        .badge.active { background: #4CAF50; color: white; }
        .badge.inactive { background: #f44336; color: white; }
        .badge.admin { background: #ff9800; color: white; }
        .badge.staff { background: #2196F3; color: white; }
        .badge.customer { background: #9c27b0; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Admin Dashboard Test - Dark Theme</h1>
        
        <div class="test-section">
            <h3>1. Backend Connection Test</h3>
            <button onclick="testBackend()">Test Backend Connection</button>
            <div id="backendResult"></div>
        </div>

        <div class="test-section">
            <h3>2. Users Data Test</h3>
            <button onclick="testUsers()">Load Users Data</button>
            <div id="usersResult"></div>
        </div>

        <div class="test-section">
            <h3>3. Products Data Test</h3>
            <button onclick="testProducts()">Load Products Data</button>
            <div id="productsResult"></div>
        </div>

        <div class="test-section">
            <h3>4. Categories Data Test</h3>
            <button onclick="testCategories()">Load Categories Data</button>
            <div id="categoriesResult"></div>
        </div>

        <div class="test-section">
            <h3>5. Offers Data Test</h3>
            <button onclick="testOffers()">Load Offers Data</button>
            <div id="offersResult"></div>
        </div>

        <div class="test-section">
            <h3>6. Gallery Data Test</h3>
            <button onclick="testGallery()">Load Gallery Data</button>
            <div id="galleryResult"></div>
        </div>

        <div class="test-section">
            <h3>7. Complete Dashboard Test</h3>
            <button onclick="testCompleteDashboard()" style="background: #4CAF50; font-size: 16px; padding: 15px 30px;">üöÄ Test Complete Dashboard</button>
            <div id="completeResult"></div>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'http://localhost:12345';

        async function testBackend() {
            const resultDiv = document.getElementById('backendResult');
            resultDiv.innerHTML = 'Testing backend connection...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/`);
                if (response.ok) {
                    const text = await response.text();
                    resultDiv.innerHTML = `
                        <span class="success">‚úÖ Backend is running on port 12345!</span><br>
                        <strong>Response:</strong><br>
                        <pre style="color: #ccc; background: #222; padding: 10px; border-radius: 5px;">${text.substring(0, 300)}...</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Backend error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <span class="error">‚ùå Cannot connect to backend: ${error.message}</span><br>
                    <strong>Make sure your backend server is running on port 12345</strong>
                `;
            }
        }

        async function testUsers() {
            const resultDiv = document.getElementById('usersResult');
            resultDiv.innerHTML = 'Loading users data...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/users`);
                if (response.ok) {
                    const users = await response.json();
                    let result = `<span class="success">‚úÖ Users API working! Found ${users.length} users</span><br><br>`;
                    
                    if (users.length > 0) {
                        result += `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Profile Picture</th>
                                        <th>Username</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                        <th>User Type</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        users.forEach(user => {
                            result += `
                                <tr>
                                    <td>${user.userId || user.id || 'N/A'}</td>
                                    <td>
                                        <img src="${BACKEND_URL}/images/${user.profilePicture || 'default-user.jpg'}" 
                                             alt="Profile" 
                                             class="thumbnail"
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjUiIGZpbGw9IiM2NjY2NjYiLz4KPHN2ZyB4PSIxMi41IiB5PSIxNSIgd2lkdGg9IjI1IiBoZWlnaHQ9IjI1IiB2aWV3Qm94PSIwIDAgMjUgMjUiIGZpbGw9Im5vbmUiPgo8Y2lyY2xlIGN4PSIxMi41IiBjeT0iMTIiLjUiIHI9IjYiIGZpbGw9IiNmZmZmZmYiLz4KPHBhdGggZD0iTTAgMjVjMC0xMC4zMjMgOC4xNzctMTguNSAxOC41LTE4LjVTMTIuNSAxNC42NzcgMTIuNSAyNUgwWiIgZmlsbD0iI2ZmZmZmZiIvPgo8L3N2Zz4KPC9zdmc+'">
                                    </td>
                                    <td>${user.username || user.name || 'N/A'}</td>
                                    <td>${user.email || 'N/A'}</td>
                                    <td>${user.phone || 'N/A'}</td>
                                    <td>
                                        <span class="badge ${(user.userType || 'customer').toLowerCase()}">
                                            ${user.userType || 'Customer'}
                                        </span>
                                    </td>
                                    <td>
                                        <span class="badge ${user.status === 'Active' ? 'active' : 'inactive'}">
                                            ${user.status || 'Active'}
                                        </span>
                                    </td>
                                </tr>
                            `;
                        });
                        
                        result += `
                                </tbody>
                            </table>
                        `;
                    } else {
                        result += '<span class="info">üìù No users found in database</span>';
                    }
                    
                    resultDiv.innerHTML = result;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Users API error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">‚ùå Users API failed: ${error.message}</span>`;
            }
        }

        async function testProducts() {
            const resultDiv = document.getElementById('productsResult');
            resultDiv.innerHTML = 'Loading products data...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/product`);
                if (response.ok) {
                    const products = await response.json();
                    let result = `<span class="success">‚úÖ Products API working! Found ${products.length} products</span><br><br>`;
                    
                    if (products.length > 0) {
                        result += `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Product ID</th>
                                        <th>Product Image</th>
                                        <th>Product Name</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        products.forEach(product => {
                            result += `
                                <tr>
                                    <td>${product.productId || product.id || 'N/A'}</td>
                                    <td>
                                        <img src="${BACKEND_URL}/images/${product.productImage || product.image || 'default-product.jpg'}" 
                                             alt="Product" 
                                             class="thumbnail"
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNjY2NjY2Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIzMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UHJvZHVjdDwvdGV4dD4KPC9zdmc+'">
                                    </td>
                                    <td>${product.productName || product.name || 'N/A'}</td>
                                    <td>${product.categoryName || product.category || 'N/A'}</td>
                                    <td>Rs. ${product.productPrice || product.price || '0.00'}</td>
                                    <td>${product.productDescription || product.description || 'N/A'}</td>
                                </tr>
                            `;
                        });
                        
                        result += `
                                </tbody>
                            </table>
                        `;
                    } else {
                        result += '<span class="info">üìù No products found in database</span>';
                    }
                    
                    resultDiv.innerHTML = result;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Products API error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">‚ùå Products API failed: ${error.message}</span>`;
            }
        }

        async function testCategories() {
            const resultDiv = document.getElementById('categoriesResult');
            resultDiv.innerHTML = 'Loading categories data...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/category`);
                if (response.ok) {
                    const categories = await response.json();
                    let result = `<span class="success">‚úÖ Categories API working! Found ${categories.length} categories</span><br><br>`;
                    
                    if (categories.length > 0) {
                        result += `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Category ID</th>
                                        <th>Image</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        categories.forEach(category => {
                            result += `
                                <tr>
                                    <td>${category.categoryId || category.id || 'N/A'}</td>
                                    <td>
                                        <img src="${BACKEND_URL}/images/${category.categoryImage || category.image || 'default-category.jpg'}" 
                                             alt="Category" 
                                             class="thumbnail"
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNjY2NjY2Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIzMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Q2F0ZWdvcnk8L3RleHQ+Cjwvc3ZnPg=='">
                                    </td>
                                    <td>${category.categoryName || category.name || 'N/A'}</td>
                                    <td>${category.categoryDescription || category.description || 'N/A'}</td>
                                    <td>
                                        <span class="badge ${category.status === 'Active' ? 'active' : 'inactive'}">
                                            ${category.status || 'Active'}
                                        </span>
                                    </td>
                                </tr>
                            `;
                        });
                        
                        result += `
                                </tbody>
                            </table>
                        `;
                    } else {
                        result += '<span class="info">üìù No categories found in database</span>';
                    }
                    
                    resultDiv.innerHTML = result;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Categories API error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">‚ùå Categories API failed: ${error.message}</span>`;
            }
        }

        async function testOffers() {
            const resultDiv = document.getElementById('offersResult');
            resultDiv.innerHTML = 'Loading offers data...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/offer`);
                if (response.ok) {
                    const offers = await response.json();
                    let result = `<span class="success">‚úÖ Offers API working! Found ${offers.length} offers</span><br><br>`;
                    
                    if (offers.length > 0) {
                        result += `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Offer ID</th>
                                        <th>Image</th>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Discount</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        offers.forEach(offer => {
                            result += `
                                <tr>
                                    <td>${offer.offerId || offer.id || 'N/A'}</td>
                                    <td>
                                        <img src="${BACKEND_URL}/images/${offer.offerImage || offer.image || 'default-offer.jpg'}" 
                                             alt="Offer" 
                                             class="thumbnail"
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNjY2NjY2Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIzMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+T2ZmZXI8L3RleHQ+Cjwvc3ZnPg=='">
                                    </td>
                                    <td>${offer.offerTitle || offer.title || 'N/A'}</td>
                                    <td>${offer.offerDescription || offer.description || 'N/A'}</td>
                                    <td>${offer.discountPercentage || offer.discount || '0'}%</td>
                                    <td>
                                        <span class="badge ${offer.status === 'Active' ? 'active' : 'inactive'}">
                                            ${offer.status || 'Active'}
                                        </span>
                                    </td>
                                </tr>
                            `;
                        });
                        
                        result += `
                                </tbody>
                            </table>
                        `;
                    } else {
                        result += '<span class="info">üìù No offers found in database</span>';
                    }
                    
                    resultDiv.innerHTML = result;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Offers API error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">‚ùå Offers API failed: ${error.message}</span>`;
            }
        }

        async function testGallery() {
            const resultDiv = document.getElementById('galleryResult');
            resultDiv.innerHTML = 'Loading gallery data...';
            
            try {
                const response = await fetch(`${BACKEND_URL}/gallery`);
                if (response.ok) {
                    const gallery = await response.json();
                    let result = `<span class="success">‚úÖ Gallery API working! Found ${gallery.length} gallery items</span><br><br>`;
                    
                    if (gallery.length > 0) {
                        result += `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Picture ID</th>
                                        <th>Image</th>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Path</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;
                        
                        gallery.forEach(item => {
                            result += `
                                <tr>
                                    <td>${item.pictureId || item.id || 'N/A'}</td>
                                    <td>
                                        <img src="${BACKEND_URL}/images/${item.picturePath || item.pictureImage || 'default-gallery.jpg'}" 
                                             alt="Gallery" 
                                             class="thumbnail"
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNjY2NjY2Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIzMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+R2FsbGVyeTwvdGV4dD4KPC9zdmc+'">
                                    </td>
                                    <td>${item.pictureName || item.name || 'N/A'}</td>
                                    <td>${item.pictureType || item.type || 'N/A'}</td>
                                    <td>${item.picturePath || item.pictureImage || 'N/A'}</td>
                                </tr>
                            `;
                        });
                        
                        result += `
                                </tbody>
                            </table>
                        `;
                    } else {
                        result += '<span class="info">üìù No gallery items found in database</span>';
                    }
                    
                    resultDiv.innerHTML = result;
                } else {
                    resultDiv.innerHTML = `<span class="error">‚ùå Gallery API error: ${response.status}</span>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<span class="error">‚ùå Gallery API failed: ${error.message}</span>`;
            }
        }

        async function testCompleteDashboard() {
            const resultDiv = document.getElementById('completeResult');
            resultDiv.innerHTML = 'Testing complete dashboard functionality...';
            
            try {
                // Test all APIs
                const [usersRes, productsRes, categoriesRes, offersRes, galleryRes] = await Promise.all([
                    fetch(`${BACKEND_URL}/users`),
                    fetch(`${BACKEND_URL}/product`),
                    fetch(`${BACKEND_URL}/category`),
                    fetch(`${BACKEND_URL}/offer`),
                    fetch(`${BACKEND_URL}/gallery`)
                ]);
                
                const users = await usersRes.json();
                const products = await productsRes.json();
                const categories = await categoriesRes.json();
                const offers = await offersRes.json();
                const gallery = await galleryRes.json();
                
                const totalItems = users.length + products.length + categories.length + offers.length + gallery.length;
                
                resultDiv.innerHTML = `
                    <span class="success">‚úÖ Complete Dashboard Test Successful!</span><br><br>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üë• Users</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #4CAF50;">${users.length}</div>
                        </div>
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üìö Products</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #2196F3;">${products.length}</div>
                        </div>
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üè∑Ô∏è Categories</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #ff9800;">${categories.length}</div>
                        </div>
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üéØ Offers</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #9c27b0;">${offers.length}</div>
                        </div>
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üñºÔ∏è Gallery</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #e91e63;">${gallery.length}</div>
                        </div>
                        <div style="background: #555; padding: 20px; border-radius: 10px; text-align: center;">
                            <h3>üìà Total</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #00bcd4;">${totalItems}</div>
                        </div>
                    </div>
                    <p><strong>üéâ Your Admin Dashboard is working perfectly with the dark theme!</strong></p>
                    <p><strong>Next:</strong> Go to your React app and navigate to <code>/admin-dashboard</code> to see the same beautiful dark theme!</p>
                `;
                
            } catch (error) {
                resultDiv.innerHTML = `
                    <span class="error">‚ùå Complete Dashboard Test Failed: ${error.message}</span><br>
                    <p><strong>Make sure your backend server is running and all APIs are working!</strong></p>
                `;
            }
        }

        // Auto-run backend test on page load
        window.onload = function() {
            setTimeout(testBackend, 500);
        };
    </script>
</body>
</html>
